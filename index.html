<!DOCTYPE html>
<html ng-app="ionicApp">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width" />
  <title>FogCloud</title>
  <link href="//api.easylink.io/bower_components/ionic/css/ionic.min.css" rel="stylesheet">
  <script src="//api.easylink.io/bower_components/ionic/js/ionic.bundle.min.js"></script>
  <script type="text/javascript">
    function getParameterByName(name) {
      var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
      return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
    }
    var access_token = getParameterByName('access_token');
    var device_list = [];
    
    var deviceLists = getParameterByName('device_list');
    if ( deviceLists !== null ){
      try {
        deviceLists = JSON.parse(deviceLists);
        
        for ( var i in deviceLists ) {
          var device = deviceLists[i];
          if ( device[0] === null ) continue;
          var product_id = device[0].split('/')[0];
          var alias = device[3] ? device[3] : device[0];
          device_list.push({'alias': alias, 'device_id': device[0], 'product_id': product_id, 'time': new Date(parseInt(device[1])*1000).toLocaleString(), 'state': device[2]});
        }
      } catch(e) {
        alert(e);
      }
    }

</script>
</head>
<body ng-controller="MyCtrl">
  <ion-header-bar class="bar-positive">
  <h1 class="title">我的设备</h1>
  <div class="buttons">
    <button class="button ion-refresh" ng-click="reloadPage()"></button>
  </div>
</ion-header-bar>
</body>
</html>
